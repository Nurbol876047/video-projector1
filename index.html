<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Projector - –î–≤–µ –∫–∞–º–µ—Ä—ã</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 30px;
            text-align: center;
            color: white;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .cameras-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            padding: 40px;
        }
        
        .camera-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .camera-card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .video-container {
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            position: relative;
            min-height: 300px;
        }
        
        .video-feed {
            width: 100%;
            max-width: 600px;
            height: auto;
            display: block;
        }
        
        .phone-frame {
            width: 100%;
            height: 400px;
            border: none;
            border-radius: 10px;
        }
        
        .camera-status {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
        }
        
        .status-online {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .status-offline {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn-phone {
            background: linear-gradient(135deg, #fd746c 0%, #ff9068 100%);
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.2em;
        }
        
        .camera-info {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            text-align: left;
        }
        
        .camera-info h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .direct-link {
            margin-top: 10px;
            padding: 10px;
            background: #e9ecef;
            border-radius: 5px;
            word-break: break-all;
        }
        
        @media (max-width: 768px) {
            .cameras-grid {
                grid-template-columns: 1fr;
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé• –î–≤–µ –∫–∞–º–µ—Ä—ã - –û–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞</h1>
            <p>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–∞–º–µ—Ä—ã –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ</p>
        </div>
        
        <div class="cameras-grid">
            <!-- –ö–∞–º–µ—Ä–∞ 1 - –í–µ–±-–∫–∞–º–µ—Ä–∞ -->
            <div class="camera-card">
                <h2>üìπ Web Camera</h2>
                <div class="camera-status status-online">
                    ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
                </div>
                <div class="video-container">
                    <img src="/video_feed/1" class="video-feed" alt="Web Camera"
                         onerror="handleCameraError(1)">
                    <div id="loading-1" class="loading" style="display: none;">
                        ‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–µ–±-–∫–∞–º–µ—Ä—ã...
                    </div>
                </div>
                <div class="controls">
                    <a href="/video_feed/1" class="btn" target="_blank">üì∫ –û—Ç–∫—Ä—ã—Ç—å</a>
                    <button class="btn" onclick="refreshCamera(1)">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
            </div>
            
            <!-- –ö–∞–º–µ—Ä–∞ 2 - –¢–µ–ª–µ—Ñ–æ–Ω -->
            <div class="camera-card">
                <h2>üì± Phone Camera</h2>
                <div class="camera-status" id="camera2-status">
                    ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...
                </div>
                
                <!-- –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω -->
                <div class="video-container">
                    <iframe src="http://192.168.0.101:8080/video" 
                            class="phone-frame" 
                            id="phone-frame"
                            allow="autoplay; camera"
                            onload="handlePhoneLoad()"
                            onerror="handlePhoneError()">
                    </iframe>
                    <div id="loading-2" class="loading" style="display: none;">
                        ‚è≥ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ç–µ–ª–µ—Ñ–æ–Ω—É...
                    </div>
                </div>
                
                <div class="controls">
                    <a href="http://192.168.0.101:8080" class="btn btn-phone" target="_blank">
                        ÔøΩÔøΩ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º
                    </a>
                    <button class="btn" onclick="refreshPhone()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                    <button class="btn" onclick="checkCameraStatus()">üì° –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                </div>
                
                <div class="direct-link">
                    <strong>–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞:</strong><br>
                    <a href="http://192.168.0.101:8080" target="_blank">
                        http://192.168.0.101:8080
                    </a>
                </div>
            </div>
        </div>
        
        <div class="camera-info">
            <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</h3>
            <p>1. IP: <code>192.168.0.101:8080</code></p>
            <p>2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: <a href="http://192.168.0.101:8080" target="_blank">http://192.168.0.101:8080</a></p>
            <p>3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–∏–¥–µ–æ –ø–æ—Ç–æ–∫ –¥–æ—Å—Ç—É–ø–µ–Ω</p>
        </div>
    </div>

    <script>
        function refreshCamera(cameraId) {
            const video = document.querySelector(`.video-feed[src="/video_feed/${cameraId}"]`);
            if (video) {
                video.src = video.src + '?t=' + new Date().getTime();
            }
        }
        
        function refreshPhone() {
            const iframe = document.getElementById('phone-frame');
            iframe.src = iframe.src + '?t=' + new Date().getTime();
        }
        
        function handlePhoneLoad() {
            document.getElementById('camera2-status').className = 'camera-status status-online';
            document.getElementById('camera2-status').innerHTML = '‚úÖ –¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–¥–∫–ª—é—á–µ–Ω';
            document.getElementById('loading-2').style.display = 'none';
        }
        
        function handlePhoneError() {
            document.getElementById('camera2-status').className = 'camera-status status-offline';
            document.getElementById('camera2-status').innerHTML = '‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è';
            document.getElementById('loading-2').style.display = 'block';
        }
        
        function handleCameraError(cameraId) {
            const video = document.querySelector(`.video-feed[src="/video_feed/${cameraId}"]`);
            const loading = document.getElementById(`loading-${cameraId}`);
            
            if (video) video.style.display = 'none';
            if (loading) loading.style.display = 'block';
            
            if (cameraId === 2) {
                document.getElementById('camera2-status').className = 'camera-status status-offline';
                document.getElementById('camera2-status').innerHTML = '‚ùå –¢–µ–ª–µ—Ñ–æ–Ω –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω';
            }
        }
        
        function checkCameraStatus() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω–∞
            fetch('http://192.168.0.101:8080', { mode: 'no-cors' })
                .then(() => {
                    handlePhoneLoad();
                })
                .catch(() => {
                    handlePhoneError();
                });
        }
        
        // –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            checkCameraStatus();
        });
    </script>
</body>
</html>
